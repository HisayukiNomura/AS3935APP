@mainpage 雷センサー　AE-AS3935＋Raspberry pi PICO

# 雷センサー　AE-AS3935＋Raspberry pi PICO

---

# 概要

秋月電子のAE-AS3935雷センサーを使用したRaspberry pi PICO Wでの作例です。
AS-AE3935は、AMS社のAS3935雷センサーICを搭載したモジュールで、雷の発生を検知し、雷雲までの距離や雷のエネルギーを推定できるデバイスです。秋月電子で販売されており、I2Cを使用して外部に情報を送信します。

主な特徴：
- 検出範囲：最大約40km先の雷を検知
- インターフェース：I²C（秋月電子のモジュールではSPIは未実装）
- 出力：雷検出時にIRQ信号を出力
- 電源電圧：2.4V〜5.5V
- 消費電流：待機時 約70μA、検出時 約350μA
- ノイズ除去機能：人工ノイズと自然雷を区別
- 距離推定：14段階で雷雲までの距離を出力

本プロジェクトは、この[AE-AS3935](https://akizukidenshi.com/catalog/g/g108685/)と、ILI9341搭載の2.8インチSPITFT液晶、[MSP2807](https://akizukidenshi.com/catalog/g/g116265/)を使用した、雷センサーのプログラムです。

---

# 主な特徴

- **TFT液晶のタッチ機能によるユーザーインタフェース**<br/>
[MSP2807](https://akizukidenshi.com/catalog/g/g116265/) のタッチスクリーンを使用し、画面上に入力機能やボタンなどを装備し、設定は本体のみで完結。

- **SNTPを使用して現在時刻を取得、表示**<br/>
Raspberry pi PICO W/2W のWifi機能を使用し、起動時の現在時刻をpool.ntp.orgから取得し、画面に時計を表示

---

# 使用ライブラリ構成

**グラフィック液晶ライブラリ**
[Rapberry PI Pico 用　ILI9341 TFT液晶 日本語ライブラリ](https://qiita.com/BUBUBB/items/7c6777c04dedf01d7c3b)


---


# 使い方

## 初期化

起動すると、最初に初期化画面が表示され、初期化の状況が表示されます。初期化が終わると自動的に次に進みます。

初期化される項目は次の通りです。初期化中の状態を確認し、×がある場合には問題を確認してください。

1. AS3935
2. WIFI初期化
3. WIFI接続
4. タイムゾーン取得
5. AS3935 のキャリブレーション

初期化中に、スクリーンをタッチし続けると、設定を初期化できます。


## 監視画面

監視画面では時計が表示されます。雷を検知すると、画面に時刻、発生源と雷雲までの概算距離が表示されます。

ここで表示される距離は実際に落雷があった場所までの距離示すものではありません。統計的に、雷雲の先端と現在位置の距離を算出したものです。

発生源は次のようになっています。
- なし　…　信号が存在しません。予期しない誤検出です。
- 雷　…　雷雲を検出しました。雷雲までの距離が表示されます。
- 距離超 …　雷雲を検出しましたが距離が遠すぎます。
- 距離０ …　雷雲を検出しましたが距離がゼロです。
- 誤信号 …　蛍光灯やモーターなどにより誤検出が発生しました。距離はーーーとなり表示されません。
- 雑音多 …　ノイズが多すぎて発生源を特定できません。

画面最上段のバーをタップすると設定画面が表示されます。

### 設定画面

#### メインメニュー
- システム設定　…　時刻表示や現在日時の設定を行います
- AS3935設定 …　AS3935の各種パラメータを変更します。変更した後は再起動が必要になります。
- ネットワーク設定 …　WIFIの設定を行います。
- タッチパネルの調整 …　タッチパネルのキャリブレーションを行います。タッチ位置がずれていると感じたときに調整を行ってください。


---

## ライセンス

本プログラムはMITライセンスおよびAdafruitライブラリのライセンスに準拠します。

---


